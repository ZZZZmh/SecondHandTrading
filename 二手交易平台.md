# 二手交易平台-后端系统

​	系统背景：我校每年师生都有大量的闲置物品，毕业的学生想要出售自己的闲置书本或者不带离学校的物品，休闲椅，网球拍等等。有些新生想要购买二手书籍，但是没有统一的平台，该平台面向学校，为学校师生提供二手交易服务。

## 1、系统概要分析

用户可以浏览物品，买卖物品，管理员管理用户以及审核商品

## 2、技术栈

（1）系统设计
		结构：B/S
		技术：Java 1.8
			后端:springboot+mybatis
			数据库:mysql,redis
			安全框架:shrio
			连接池:Druid
			图片存储数据库：七牛云
		接口测试:PostMan

该项目采取前后端分离模式，后端使用SpringBoot框架开发，mybatis持久层，redis缓存模拟消息队列，shrio进行安全权限控制，mysql使用悲观锁保证商品数量线程安全

## 项目结构

![](picture\项目结构.png)

## 3、需求分析

### 用户：

​	登入注册：

​			注册账号，绑定邮箱和电话号码。邮箱接收验证码。注册信息包括，账号，密码，真实姓名，身份证，学号，邮箱，联系电话

​	查看个人信息

​			虚拟名，账号，真实姓名（邹XX），身份证（4416022....XXXX），学号，邮箱，联系电话，注册时间，用户状态，信誉

​	修改个人信息

​			修改虚拟名，修改头像，修改个人个性签名，修改联系电话

​			需要绑定邮箱认证才能修改—>修改真实姓名，身份证，学号，邮箱

​	商品加入购物车

​	商品从购物车取消

​	下订单

​	取消订单

​	结算购买物品（信誉低于60不得买商品）

​	查看订单信息

​			卖家，买家，商品信息，创建时间，订单状态

​	确认收货

​	评论

​			购买商品后可以评并且上传一张图片，店家不可删除评论（一个订单只能评论一次）

​	退款

​			申请退款

​	售后

​		卖家或者买家联系管理员介入完成或者取消订单，扣除商家或者卖家的信誉值，一次介入扣除10点

​	恢复信誉

​		联系管理员沟通恢复信誉

​	账号找回

​		1、通过邮箱  2、通过绑定手机

### 商家

​	发布二手商品（信誉低于70不得卖商品）

​			商品名字，数量，价格，图片，商品介绍，卖家联系方式

​	管理自己发布的二手商品信息

​			修改商品信息

​	订单发货

### 管理员：

​	用户管理

​		查询用户，封禁用户（身份证拉黑），解封用户，信誉管理

​	审核商品发布信息

​	订单管理

​		查询订单，查询非正常流程订单（非正常订单永久保存），取消订单，完成订单

## 4、流程图

![](picture\流程图.png)

## 5、E-R设计

![](picture\E-R图.png)

## 6、接口模块设计

三大模块：公共模块，用户模块，管理模块。公共模块无需权限也能访问

### 公共模块 /public/**

​		注册

​		获取验证码

​		登入(账号密码，邮箱登入)

​		退出登入

​		查询所有商品

​		按名称查询商品

​		按分类查询商品

### 普通用户 /user/**

​		账号找回

​		实名认证

​		绑定支付宝

​		改绑支付宝

​		改绑邮箱

​		注销用户（数据库软删除）

​		管理个人信息（查看，增加，修改，删除）

​		管理绑定信息

​		管理购物车（查看，增加，修改，删除）

​		订单管理（查看，增加，修改，删除）

​		结算

​		确认收货

​		申请退款

​		评论

​		评论点赞（点踩）

​		修改评价

​		申请售后

-------------------------------------------------

​		/user/merchant/**

​		管理商品（出售，删除，修改商品，查看寄卖的商品）

​		订单管理（发货，退货退款处理）

### 管理员 /administrator/**

​		管理用户（查询所有用户，封禁用户，解封用户）

​		审核商品（18🈲）

​		下架商品（18🈲）

​		查询所有订单

​		订单管理（客服介入）

​		信誉管理

​		查询所有评论

​		管理评论

